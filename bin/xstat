#!/bin/bash
INPUT_STATE='Ｅ'

if [ "activating" = "$(systemctl --user is-active fcitx5)" ]; then
  INPUT_STATE='中'
elif [ "activating" = "$(systemctl --user is-active warpd)" ]; then
  INPUT_STATE='Ｗ'
fi

# The `grep -v` part is for when switch controllers are connected.
echo $(acpi -b | grep -v '\b0%' | grep -o '[0-9]*%') '|' "$INPUT_STATE" '|' $(date -u '+%Y-%m-%d %H:%M:%S') $(date +%:z)
