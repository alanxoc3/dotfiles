#!/bin/bash
# ccl - copy clipboard.
# single interface for copying to the clipboard for both OSX and linux.

copyfunc() {
    TMP_FILE="${TMPDIR:-/tmp}/.clip-${USER:-$(whoami)}"
    touch "$TMP_FILE"
    chmod 600 "$TMP_FILE"

    cat - > "$TMP_FILE"
    if [[ "$(uname)" =~ Darwin ]] && command -v pbcopy &>/dev/null ; then
        cat "$TMP_FILE" | pbcopy &>/dev/null
    elif command -v xclip &>/dev/null; then
        cat "$TMP_FILE" | xclip -selection clipboard &>/dev/null
    fi
}

if [ -t 0 ]; then
    echo -n "$@" | copyfunc
else
    cat - | copyfunc
fi
